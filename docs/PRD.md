# Timeline Craft AI - 产品需求文档 (PRD)

## 1. 产品概述

### 1.1 产品定位
Timeline Craft AI 是一个基于时间轴的智能视频创作工具，让用户通过简单的文字描述创建精美的视频内容。

### 1.2 目标用户
- 内容创作者
- 营销人员
- 教育工作者
- 个人用户

### 1.3 核心价值主张
- 降低视频创作门槛
- 提供专业级时间轴编辑体验
- AI驱动的图像生成和视频合成

## 2. 功能需求

### 2.1 时间轴编辑器 (已实现)

#### 2.1.1 基础功能
- [x] 可视化时间轴界面 (180秒总时长)
- [x] 拖拽创建片段
- [x] 片段选择和删除
- [x] 缩放控制 (0.5x - 3x)
- [x] 响应式设计

#### 2.1.2 片段管理
- [x] 片段状态管理 (empty/generating/ready/error)
- [x] 片段描述编辑
- [x] 连贯排列显示
- [x] 悬停优先级显示

#### 2.1.3 用户交互
- [x] 最小片段时长限制 (0.5秒)
- [x] 时间刻度显示
- [x] 状态可视化指示器
- [x] 片段描述指导 (主体、运动、背景)

### 2.2 片段编辑面板 (已实现)

#### 2.2.1 描述编辑
- [x] 结构化描述输入
- [x] 三要素指导 (主体、运动、背景)
- [x] 实时更新

#### 2.2.2 图像生成 (待实现)
- [ ] 首帧图像生成
- [ ] 尾帧图像生成
- [ ] 图像重新生成
- [ ] 生成状态反馈

### 2.3 视频播放器 (已实现基础)

#### 2.3.1 播放控制
- [x] 播放/暂停控制
- [x] 进度条控制
- [x] 时间显示

#### 2.3.2 视频展示 (待实现)
- [ ] 视频文件播放
- [ ] 全屏支持
- [ ] 音量控制

### 2.4 项目管理 (已实现基础)

#### 2.4.1 项目列表
- [x] 项目展示卡片
- [x] 创建新项目
- [x] 项目预览缩略图

#### 2.4.2 项目操作 (待实现)
- [ ] 项目重命名
- [ ] 项目删除
- [ ] 项目复制
- [ ] 项目导出

### 2.5 AI集成 (待实现)

#### 2.5.1 图像生成
- [ ] 文字转图像 API 集成
- [ ] 批量生成优化
- [ ] 错误处理和重试

#### 2.5.2 视频合成
- [ ] 片段视频生成
- [ ] 无缝拼接算法
- [ ] 过渡效果处理

## 3. 技术需求

### 3.1 前端架构
- [x] React + TypeScript
- [x] Vite 构建工具
- [x] Tailwind CSS + shadcn/ui
- [x] 响应式设计

### 3.2 状态管理
- [x] React useState (当前)
- [ ] 考虑升级到 Zustand/Redux Toolkit

### 3.3 后端集成 (待规划)
- [ ] Supabase 数据库集成
- [ ] 用户认证系统
- [ ] 文件存储服务
- [ ] AI API 集成

### 3.4 部署和CI/CD
- [x] GitHub Actions 自动部署
- [x] GitHub Pages 托管

## 4. 用户体验需求

### 4.1 界面设计
- [x] 现代化设计语言
- [x] 一致的组件系统
- [x] 暗色/亮色主题支持
- [x] 动画和过渡效果

### 4.2 交互体验
- [x] 直观的拖拽操作
- [x] 实时反馈
- [x] 错误状态处理
- [x] 加载状态显示

### 4.3 可访问性
- [x] 键盘导航支持
- [x] 屏幕阅读器友好
- [x] 色彩对比度优化

## 5. 性能需求

### 5.1 响应时间
- [ ] 页面加载时间 < 3秒
- [ ] 片段创建响应 < 500ms
- [ ] AI图像生成 < 30秒

### 5.2 资源优化
- [x] 代码分割
- [x] 图像懒加载
- [ ] 缓存策略

## 6. 数据需求

### 6.1 数据模型

#### 6.1.1 项目数据
```typescript
interface Project {
  id: string;
  name: string;
  description?: string;
  thumbnail?: string;
  createdAt: Date;
  updatedAt: Date;
  segments: Segment[];
}
```

#### 6.1.2 片段数据
```typescript
interface Segment {
  id: string;
  startTime: number;
  endTime: number;
  description: string;
  status: 'empty' | 'generating' | 'ready' | 'error';
  startFrame?: string;
  endFrame?: string;
}
```

### 6.2 数据存储
- [ ] 本地存储 (localStorage)
- [ ] 云端同步 (Supabase)
- [ ] 文件存储 (图像/视频)

## 7. 安全需求

### 7.1 数据安全
- [ ] 用户数据加密
- [ ] API密钥安全管理
- [ ] 文件上传安全检查

### 7.2 用户认证
- [ ] 邮箱密码认证
- [ ] 会话管理
- [ ] 权限控制

## 8. 实施计划

### 8.1 Phase 1 - 核心功能 (已完成 70%)
- [x] 时间轴编辑器
- [x] 片段管理
- [x] 基础UI组件
- [ ] AI图像生成集成

### 8.2 Phase 2 - 增强功能
- [ ] 视频合成
- [ ] 项目管理完善
- [ ] 用户认证
- [ ] 数据持久化

### 8.3 Phase 3 - 优化和扩展
- [ ] 性能优化
- [ ] 高级编辑功能
- [ ] 协作功能
- [ ] 移动端适配

## 9. 风险和缓解策略

### 9.1 技术风险
- **AI API限制**: 实施重试机制和备用方案
- **性能问题**: 实施渐进式加载和优化
- **浏览器兼容性**: 使用现代Web标准和polyfills

### 9.2 产品风险
- **用户接受度**: 进行用户测试和反馈收集
- **竞争风险**: 持续功能创新和用户体验优化

## 10. 成功指标

### 10.1 技术指标
- [ ] 代码覆盖率 > 80%
- [ ] 页面性能评分 > 90
- [ ] 用户体验评分 > 4.5/5

### 10.2 业务指标
- [ ] 用户创建项目数
- [ ] 视频生成成功率
- [ ] 用户留存率

---

**文档版本**: v1.0  
**最后更新**: 2025-01-06  
**负责人**: Timeline Craft AI 团队  
**审核状态**: 待审核